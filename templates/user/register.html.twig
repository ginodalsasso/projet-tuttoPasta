{% extends 'base.html.twig' %}

{% block title %}Register{% endblock %}

{% block page_title %} Inscription {% endblock %}

{% block body %}
    {{ parent() }}{# Inclus le "page_title" ainsi que les propriétés du header #}
    <main class="wrapper">
        {% for flash_error in app.flashes('verify_email_error') %}
            <div class="alert alert-danger" role="alert">{{ flash_error }}</div>
        {% endfor %}

        {{ form_errors(registrationForm) }}
        {{ form_start(registrationForm) }}
            <div class="form_container">
                <div class="form-group">
                    {{ form_row(registrationForm.username) }}
                    <div class="error_msg" id="pseudo_error"></div>
                </div>

                <div class="form-group">
                    {{ form_row(registrationForm.email) }}
                    <div class="error_msg" id="email_error"></div>
                </div>

                {{ form_row(registrationForm.plainPassword, { label: 'Password' }) }}
                <div class="error_msg" id="password_error"></div>

                <div class="agreeTerms_display">
                    {{ form_row(registrationForm.agreeTerms) }}
                </div>
                
                <puzzle-captcha 
                    width="350" 
                    height="200" 
                    piece-width="80" 
                    piece-height="50"
                    src="{{ path('captcha', {challenge: challenge})}}">
                </puzzle-captcha>

                <button type="submit" id="register_save" class="full_button_black">S'inscrire</button>
            </div>
        {{ form_end(registrationForm) }}
    </main>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('/js/register.js')}}"></script>
    <script src="{{ asset('/js/captcha.js')}}"></script>
{% endblock %}